/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package vista;

import control.ComentariosRevisionTallerJpaController;
import control.Conexion;
import control.ConvocatoriasJpaController;
import control.EventosJpaController;
import control.EvidenciasJpaController;
import control.TalleresJpaController;
import control.UsuariosJpaController;
import control.exceptions.IllegalOrphanException;
import control.exceptions.NonexistentEntityException;
import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Time;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import modelo.BitacorasEventos;
import modelo.ComentariosRevisionTaller;
import modelo.Convocatorias;
import modelo.EventoParticipantesTalleres;
import modelo.Eventos;
import modelo.Evidencias;
import modelo.Talleres;
import modelo.Usuarios;

/**
 *
 * @author Diego Garcia
 */
public class VentanaPrincipal extends javax.swing.JFrame {
    
    private Usuarios usuarioActual;
    private List<Convocatorias> listaConvocatoriasCargadas;
    
    public VentanaPrincipal(Usuarios u) {
        initComponents();
        
        setLocationRelativeTo(null);
        
        this.usuarioActual = u;
        lblBienvenida.setText("!Bienvenido, " + u.getNombre() + "!");
        lblNombre.setText("Nombre: " + u.getNombre());
        lblCorreo.setText("Correo: " + u.getCorreo());
        lblRol.setText("Rol : " + u.getRol());
        lblNumControl.setText("Número de control: " + u.getNumeroControl());
        
        // Manipulacion del DialogGestionUusarios
        cargarUsuariosEnTabla();
        seleccionarUsuarios();
        // Manipulacion del DialogGestionEventos
        cargarEventosEnTabla();
        seleccionarEventos();
        
        //Manipulación de Talleres
        cargarPonentesEnComboBox();
        cargarEventosAsociadosEnComboBox();
        cargarTalleresEnTabla();
        
        //Manipulación de Eventos
        cargarConvocatoriasEnTabla();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        DialogGestionUsuarios = new javax.swing.JDialog();
        jPanel1 = new javax.swing.JPanel();
        encabezado = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        cboURol = new javax.swing.JComboBox<>();
        txtUID = new javax.swing.JTextField();
        txtUEmail = new javax.swing.JTextField();
        btnAgregar = new javax.swing.JButton();
        btnActualizar = new javax.swing.JButton();
        btnEliminar = new javax.swing.JButton();
        btnLimpiar = new javax.swing.JButton();
        txtUNumControl = new javax.swing.JTextField();
        txtUNombre = new javax.swing.JTextField();
        passContrasena = new javax.swing.JPasswordField();
        jLabel9 = new javax.swing.JLabel();
        encabezado1 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        ttUsuarios = new javax.swing.JTable();
        DialogGestionEventos = new javax.swing.JDialog();
        encabezado2 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        ttEventos = new javax.swing.JTable();
        jPanel3 = new javax.swing.JPanel();
        encabezado4 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        txtENombre = new javax.swing.JTextField();
        jLabel20 = new javax.swing.JLabel();
        txtLugar = new javax.swing.JTextField();
        btnECrear = new javax.swing.JButton();
        btnEModificar = new javax.swing.JButton();
        btnEEliminar = new javax.swing.JButton();
        btnELimpiar = new javax.swing.JButton();
        cboEstado = new javax.swing.JComboBox<>();
        jLabel21 = new javax.swing.JLabel();
        calendario = new com.toedter.calendar.JCalendar();
        jScrollPane3 = new javax.swing.JScrollPane();
        txtEDescripcion = new javax.swing.JTextArea();
        jLabel3 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        txtEInicio = new javax.swing.JTextField();
        txtEFin = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        txtEID = new javax.swing.JTextField();
        DialogGestionTalleres = new javax.swing.JDialog();
        txtNombreTaller6 = new javax.swing.JLabel();
        txtFieldNombreTaller = new javax.swing.JTextField();
        jLabel18 = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        jScrollPane8 = new javax.swing.JScrollPane();
        txtDescripcionTaller = new javax.swing.JTextArea();
        cboPonente = new javax.swing.JComboBox<>();
        txtMaterialReq = new javax.swing.JLabel();
        txtFieldMaterial_Req = new javax.swing.JTextField();
        TITULO4 = new javax.swing.JLabel();
        TITULO5 = new javax.swing.JLabel();
        jScrollPane9 = new javax.swing.JScrollPane();
        tblTalleres = new javax.swing.JTable();
        cboEstadoTaller = new javax.swing.JLabel();
        cboEstadoTaller2 = new javax.swing.JComboBox<>();
        txtManualRuta = new javax.swing.JTextField();
        btnActualizarTaller = new javax.swing.JButton();
        btnAgregarTaller = new javax.swing.JButton();
        btnElliminarTaller = new javax.swing.JButton();
        txtFecha_Hora = new javax.swing.JLabel();
        jSeparator2 = new javax.swing.JSeparator();
        jSeparator3 = new javax.swing.JSeparator();
        btnLimpiarTalleres = new javax.swing.JButton();
        DialogGestionConvocatorias = new javax.swing.JDialog();
        TITULO = new javax.swing.JLabel();
        jScrollPane4 = new javax.swing.JScrollPane();
        tblConvocatorias = new javax.swing.JTable();
        txtNombreTaller = new javax.swing.JLabel();
        txtFieldTituloConvocatoria = new javax.swing.JTextField();
        txtNombreTaller2 = new javax.swing.JLabel();
        jScrollPane5 = new javax.swing.JScrollPane();
        taDescripcionConvocatoria = new javax.swing.JTextArea();
        jLabel11 = new javax.swing.JLabel();
        btnPublicar = new javax.swing.JButton();
        txtNombreTaller1 = new javax.swing.JLabel();
        btnEliminarConvocatoria = new javax.swing.JButton();
        btnModificar = new javax.swing.JButton();
        TITULO1 = new javax.swing.JLabel();
        jSeparator4 = new javax.swing.JSeparator();
        jSeparator5 = new javax.swing.JSeparator();
        dateChooserFechaLimite = new com.toedter.calendar.JDateChooser();
        dateChooserFechaInscripcion = new com.toedter.calendar.JDateChooser();
        btnLimpiarConvocatorias = new javax.swing.JButton();
        DialogInscripcionEventoTaller = new javax.swing.JDialog();
        btnInscribirme = new javax.swing.JButton();
        TITULO6 = new javax.swing.JLabel();
        jScrollPane11 = new javax.swing.JScrollPane();
        tblTalleresDisponibles = new javax.swing.JTable();
        TITULO7 = new javax.swing.JLabel();
        jScrollPane10 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        btnDesinscribirme = new javax.swing.JToggleButton();
        DialogGestionEvidencias = new javax.swing.JDialog();
        jLabel14 = new javax.swing.JLabel();
        TITULO2 = new javax.swing.JLabel();
        jScrollPane6 = new javax.swing.JScrollPane();
        tblEvidencias = new javax.swing.JTable();
        txtNombreTaller4 = new javax.swing.JLabel();
        txtNombreTaller5 = new javax.swing.JLabel();
        TITULO3 = new javax.swing.JLabel();
        txtFieldTituloEvidencia = new javax.swing.JTextField();
        jFileChooser1 = new javax.swing.JFileChooser();
        jScrollPane7 = new javax.swing.JScrollPane();
        taDescripcionEvidencia = new javax.swing.JTextArea();
        btnSeleccionarArchivo = new javax.swing.JButton();
        btnSubirEvidencia = new javax.swing.JButton();
        btnDescargarEvidencia = new javax.swing.JButton();
        btnEliminarEvidencia = new javax.swing.JButton();
        jSeparator6 = new javax.swing.JSeparator();
        panelGeneral = new javax.swing.JPanel();
        panelEncabezado = new javax.swing.JPanel();
        lblBienvenida = new javax.swing.JLabel();
        jSeparator1 = new javax.swing.JSeparator();
        jLabel24 = new javax.swing.JLabel();
        panelEstatus = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        lblNombre = new javax.swing.JLabel();
        lblCorreo = new javax.swing.JLabel();
        lblRol = new javax.swing.JLabel();
        lblNumControl = new javax.swing.JLabel();
        menuBarraPrincipal = new javax.swing.JMenuBar();
        menuArchivo = new javax.swing.JMenu();
        menuGestion = new javax.swing.JMenu();
        opcionUsuarios = new javax.swing.JMenuItem();
        opcionEventos = new javax.swing.JMenuItem();
        opcionTalleres = new javax.swing.JMenuItem();
        opcionConvocatorias = new javax.swing.JMenuItem();
        opcionEvidencias = new javax.swing.JMenuItem();
        menuReportes = new javax.swing.JMenu();
        menuInscripcion = new javax.swing.JMenu();
        opcionInscripcion = new javax.swing.JMenuItem();
        menuAyuda = new javax.swing.JMenu();
        opcionAyuda = new javax.swing.JMenuItem();
        menuSalir = new javax.swing.JMenu();
        opcionCerrarSesion = new javax.swing.JMenuItem();
        opcionSalir = new javax.swing.JMenuItem();

        DialogGestionUsuarios.setTitle("Gestión de usuarios");

        jPanel1.setToolTipText("");

        encabezado.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        encabezado.setText("Datos del usuario");

        jLabel2.setText("ID:");

        jLabel4.setText("Nombre:");

        jLabel6.setText("Contraseña:");

        jLabel7.setText("Núm. de Control:");

        jLabel8.setText("Rol:");

        cboURol.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "DOCENTE", "TALLERISTA", "ADMINISTRADOR" }));
        cboURol.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cboURolActionPerformed(evt);
            }
        });

        txtUID.setEditable(false);

        txtUEmail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtUEmailActionPerformed(evt);
            }
        });

        btnAgregar.setText("Agregar");
        btnAgregar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAgregarActionPerformed(evt);
            }
        });

        btnActualizar.setText("Actualizar");
        btnActualizar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnActualizarActionPerformed(evt);
            }
        });

        btnEliminar.setText("Eliminar");
        btnEliminar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarActionPerformed(evt);
            }
        });

        btnLimpiar.setText("Limpiar");
        btnLimpiar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLimpiarActionPerformed(evt);
            }
        });

        txtUNumControl.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtUNumControlActionPerformed(evt);
            }
        });

        txtUNombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtUNombreActionPerformed(evt);
            }
        });

        jLabel9.setText("Email:");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(encabezado)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(49, 49, 49)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jLabel7, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel8, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel9, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(43, 43, 43)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(txtUEmail)
                        .addComponent(cboURol, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(txtUID, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                        .addComponent(txtUNumControl)
                        .addComponent(txtUNombre, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE))
                    .addComponent(passContrasena, javax.swing.GroupLayout.PREFERRED_SIZE, 200, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 218, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btnActualizar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnAgregar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEliminar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnLimpiar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(51, 51, 51))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(33, 33, 33)
                .addComponent(btnAgregar)
                .addGap(18, 18, 18)
                .addComponent(btnActualizar)
                .addGap(21, 21, 21)
                .addComponent(btnEliminar)
                .addGap(18, 18, 18)
                .addComponent(btnLimpiar)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(encabezado)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtUID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(txtUNombre))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtUEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(passContrasena, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cboURol, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtUNumControl, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(44, 44, 44))
        );

        encabezado1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        encabezado1.setText("Lista de usuarios");

        ttUsuarios.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null},
                {null, null, null, null, null, null}
            },
            new String [] {
                "ID", "Nombre", "Email", "Rol", "Núm. de Control", "Contraseña"
            }
        ));
        jScrollPane1.setViewportView(ttUsuarios);

        javax.swing.GroupLayout DialogGestionUsuariosLayout = new javax.swing.GroupLayout(DialogGestionUsuarios.getContentPane());
        DialogGestionUsuarios.getContentPane().setLayout(DialogGestionUsuariosLayout);
        DialogGestionUsuariosLayout.setHorizontalGroup(
            DialogGestionUsuariosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionUsuariosLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(DialogGestionUsuariosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogGestionUsuariosLayout.createSequentialGroup()
                        .addComponent(encabezado1)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jScrollPane1))
                .addContainerGap())
        );
        DialogGestionUsuariosLayout.setVerticalGroup(
            DialogGestionUsuariosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionUsuariosLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(encabezado1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 153, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(21, Short.MAX_VALUE))
        );

        jPanel1.getAccessibleContext().setAccessibleName("");

        encabezado2.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        encabezado2.setText("Lista de eventos");

        ttEventos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null}
            },
            new String [] {
                "ID", "Nombre", "Descripción", "Fecha", "Hora de inicio", "Hora de fin", "Lugar", "Estado"
            }
        ));
        jScrollPane2.setViewportView(ttEventos);

        jPanel3.setToolTipText("");

        encabezado4.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        encabezado4.setText("Datos del evento");

        jLabel15.setText("Nombre:");

        jLabel16.setText("Descripción:");

        jLabel17.setText("Fecha:");

        txtENombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtENombreActionPerformed(evt);
            }
        });

        jLabel20.setText("Lugar:");

        btnECrear.setText("Crear");
        btnECrear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnECrearActionPerformed(evt);
            }
        });

        btnEModificar.setText("Modificar");
        btnEModificar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEModificarActionPerformed(evt);
            }
        });

        btnEEliminar.setText("Eliminar");
        btnEEliminar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEEliminarActionPerformed(evt);
            }
        });

        btnELimpiar.setText("Limpiar");
        btnELimpiar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnELimpiarActionPerformed(evt);
            }
        });

        cboEstado.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "PLANIFICADO", "CONFIRMADO", "EN_CURSO", "FINALIZADO", "CANCELADO", "POSPUESTO" }));
        cboEstado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cboEstadoActionPerformed(evt);
            }
        });

        jLabel21.setText("Estado:");

        txtEDescripcion.setColumns(20);
        txtEDescripcion.setRows(5);
        jScrollPane3.setViewportView(txtEDescripcion);

        jLabel3.setText("Hora de fin:");

        jLabel5.setText("Hora de inicio:");

        jLabel10.setText("ID:");

        txtEID.setEditable(false);

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(48, 48, 48)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGap(120, 120, 120)
                                .addComponent(btnECrear, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(37, 37, 37)
                                .addComponent(btnEModificar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(32, 32, 32)
                                .addComponent(btnEEliminar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel20, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel21, javax.swing.GroupLayout.PREFERRED_SIZE, 75, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 77, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addComponent(jLabel10, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addGap(12, 12, 12)))
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtLugar, javax.swing.GroupLayout.DEFAULT_SIZE, 350, Short.MAX_VALUE)
                                    .addComponent(txtEID)
                                    .addComponent(txtENombre)
                                    .addComponent(cboEstado, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 77, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 350, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(31, 31, 31)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 77, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(calendario, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(48, 48, 48)
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtEInicio)
                                    .addComponent(txtEFin)
                                    .addComponent(jLabel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addComponent(btnELimpiar, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(encabezado4)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addComponent(encabezado4)
                .addGap(12, 12, 12)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel10)
                            .addComponent(txtEID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(txtENombre, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel15, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel16, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 52, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabel20, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(28, 28, 28))
                            .addComponent(txtLugar, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(cboEstado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel21, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(calendario, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(jLabel5)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtEInicio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(27, 27, 27)
                                .addComponent(jLabel3)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtEFin, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnECrear)
                    .addComponent(btnEModificar)
                    .addComponent(btnEEliminar)
                    .addComponent(btnELimpiar))
                .addGap(16, 16, 16))
        );

        javax.swing.GroupLayout DialogGestionEventosLayout = new javax.swing.GroupLayout(DialogGestionEventos.getContentPane());
        DialogGestionEventos.getContentPane().setLayout(DialogGestionEventosLayout);
        DialogGestionEventosLayout.setHorizontalGroup(
            DialogGestionEventosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionEventosLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(DialogGestionEventosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(DialogGestionEventosLayout.createSequentialGroup()
                        .addComponent(encabezado2)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 988, Short.MAX_VALUE))
                .addContainerGap())
        );
        DialogGestionEventosLayout.setVerticalGroup(
            DialogGestionEventosLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionEventosLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(encabezado2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        txtNombreTaller6.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller6.setText("Nombre del taller: ");

        txtFieldNombreTaller.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldNombreTallerActionPerformed(evt);
            }
        });

        jLabel18.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        jLabel18.setText("Descripción:");

        jLabel19.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        jLabel19.setText("Ponente/Instructor:");

        txtDescripcionTaller.setColumns(20);
        txtDescripcionTaller.setRows(5);
        jScrollPane8.setViewportView(txtDescripcionTaller);

        txtMaterialReq.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtMaterialReq.setText("Material Requerido:");

        txtFieldMaterial_Req.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldMaterial_ReqActionPerformed(evt);
            }
        });

        TITULO4.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO4.setText("Talleres Registrados");

        TITULO5.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO5.setText("Gestión de Talleres");

        tblTalleres.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "ID", "Nombre", "Descripción", "Usuario"
            }
        ));
        tblTalleres.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblTalleresMouseClicked(evt);
            }
        });
        jScrollPane9.setViewportView(tblTalleres);

        cboEstadoTaller.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        cboEstadoTaller.setText("Estado Taller:");

        cboEstadoTaller2.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "APROBADO", "EN_REVISION_DOCENTE", "REQUIERE_MODIFICACION", "PENDIENTE_PROPUESTA" }));
        cboEstadoTaller2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cboEstadoTaller2ActionPerformed(evt);
            }
        });

        txtManualRuta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtManualRutaActionPerformed(evt);
            }
        });

        btnActualizarTaller.setText("Actualizar Taller");
        btnActualizarTaller.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnActualizarTallerActionPerformed(evt);
            }
        });

        btnAgregarTaller.setText("Agregar Taller");
        btnAgregarTaller.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAgregarTallerActionPerformed(evt);
            }
        });

        btnElliminarTaller.setText("Eliminar Taller");
        btnElliminarTaller.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnElliminarTallerActionPerformed(evt);
            }
        });

        txtFecha_Hora.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtFecha_Hora.setText("Ruta de Anexos:");

        btnLimpiarTalleres.setText("Limpiar");
        btnLimpiarTalleres.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLimpiarTalleresActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout DialogGestionTalleresLayout = new javax.swing.GroupLayout(DialogGestionTalleres.getContentPane());
        DialogGestionTalleres.getContentPane().setLayout(DialogGestionTalleresLayout);
        DialogGestionTalleresLayout.setHorizontalGroup(
            DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                .addGap(343, 343, 343)
                .addComponent(TITULO4)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogGestionTalleresLayout.createSequentialGroup()
                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                        .addGap(28, 28, 28)
                        .addComponent(btnAgregarTaller)
                        .addGap(162, 162, 162)
                        .addComponent(btnActualizarTaller)
                        .addGap(157, 157, 157)
                        .addComponent(btnLimpiarTalleres)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 190, Short.MAX_VALUE)
                        .addComponent(btnElliminarTaller))
                    .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jSeparator3, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jSeparator2, javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(TITULO5)
                                    .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                            .addComponent(txtMaterialReq)
                                            .addGap(76, 76, 76)
                                            .addComponent(txtFieldMaterial_Req, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                            .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(txtNombreTaller6)
                                                .addComponent(txtFecha_Hora))
                                            .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                                    .addGap(81, 81, 81)
                                                    .addComponent(txtFieldNombreTaller, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogGestionTalleresLayout.createSequentialGroup()
                                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                    .addComponent(txtManualRuta, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 76, Short.MAX_VALUE)
                                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                        .addComponent(jLabel18)
                                        .addGap(57, 57, 57)
                                        .addComponent(jScrollPane8, javax.swing.GroupLayout.DEFAULT_SIZE, 390, Short.MAX_VALUE))
                                    .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                                        .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel19)
                                            .addComponent(cboEstadoTaller))
                                        .addGap(18, 18, 18)
                                        .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addComponent(cboEstadoTaller2, 0, 391, Short.MAX_VALUE)
                                            .addComponent(cboPonente, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addComponent(jScrollPane9, javax.swing.GroupLayout.Alignment.LEADING))))
                .addGap(18, 18, 18))
        );
        DialogGestionTalleresLayout.setVerticalGroup(
            DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(TITULO5)
                .addGap(25, 25, 25)
                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(txtNombreTaller6, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                            .addGap(65, 65, 65)
                            .addComponent(txtFecha_Hora, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(DialogGestionTalleresLayout.createSequentialGroup()
                        .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(txtFieldNombreTaller, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel18, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jScrollPane8, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(11, 11, 11)
                        .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(cboPonente, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtManualRuta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(34, 34, 34)
                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(cboEstadoTaller, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(cboEstadoTaller2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(txtFieldMaterial_Req, javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(txtMaterialReq, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGap(18, 18, 18)
                .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(DialogGestionTalleresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnAgregarTaller)
                    .addComponent(btnActualizarTaller)
                    .addComponent(btnElliminarTaller)
                    .addComponent(btnLimpiarTalleres))
                .addGap(21, 21, 21)
                .addComponent(jSeparator3, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 75, Short.MAX_VALUE)
                .addComponent(TITULO4)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane9, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(21, 21, 21))
        );

        TITULO.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO.setText("Gestión de Convocatorias");

        tblConvocatorias.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Titulo", "Descripción", "Fecha de Publicación", "Fecha Límite"
            }
        ));
        tblConvocatorias.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblConvocatoriasMouseClicked(evt);
            }
        });
        jScrollPane4.setViewportView(tblConvocatorias);

        txtNombreTaller.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller.setText("Título convocatoria:");

        txtFieldTituloConvocatoria.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldTituloConvocatoriaActionPerformed(evt);
            }
        });

        txtNombreTaller2.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller2.setText("Fecha de inscripción/publicación:");

        taDescripcionConvocatoria.setColumns(20);
        taDescripcionConvocatoria.setRows(5);
        jScrollPane5.setViewportView(taDescripcionConvocatoria);

        jLabel11.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        jLabel11.setText("Descripción convocatoria:");

        btnPublicar.setText("Publicar/Guardar");
        btnPublicar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPublicarActionPerformed(evt);
            }
        });

        txtNombreTaller1.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller1.setText("Fecha límite:");

        btnEliminarConvocatoria.setText("Eliminar Convocatoria");
        btnEliminarConvocatoria.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarConvocatoriaActionPerformed(evt);
            }
        });

        btnModificar.setText("Modificar");
        btnModificar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnModificarActionPerformed(evt);
            }
        });

        TITULO1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO1.setText("Lista de Convocatorias Existentes");

        btnLimpiarConvocatorias.setText("Limpiar");
        btnLimpiarConvocatorias.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLimpiarConvocatoriasActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout DialogGestionConvocatoriasLayout = new javax.swing.GroupLayout(DialogGestionConvocatorias.getContentPane());
        DialogGestionConvocatorias.getContentPane().setLayout(DialogGestionConvocatoriasLayout);
        DialogGestionConvocatoriasLayout.setHorizontalGroup(
            DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                        .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                                .addContainerGap()
                                .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(TITULO)
                                    .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 774, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, DialogGestionConvocatoriasLayout.createSequentialGroup()
                                            .addGap(29, 29, 29)
                                            .addComponent(btnPublicar)
                                            .addGap(131, 131, 131)
                                            .addComponent(btnModificar)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 115, Short.MAX_VALUE)
                                            .addComponent(btnLimpiarConvocatorias)
                                            .addGap(83, 83, 83)
                                            .addComponent(btnEliminarConvocatoria))
                                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, DialogGestionConvocatoriasLayout.createSequentialGroup()
                                            .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(jLabel11)
                                                .addComponent(txtNombreTaller))
                                            .addGap(18, 18, 18)
                                            .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(txtFieldTituloConvocatoria, javax.swing.GroupLayout.PREFERRED_SIZE, 205, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 205, javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addGap(18, 18, 18)
                                            .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(txtNombreTaller1)
                                                .addComponent(txtNombreTaller2))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                                .addComponent(dateChooserFechaInscripcion, javax.swing.GroupLayout.DEFAULT_SIZE, 216, Short.MAX_VALUE)
                                                .addComponent(dateChooserFechaLimite, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))))
                            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                                .addGap(282, 282, 282)
                                .addComponent(TITULO1)))
                        .addGap(0, 60, Short.MAX_VALUE))
                    .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jSeparator5))
                    .addComponent(jSeparator4, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );
        DialogGestionConvocatoriasLayout.setVerticalGroup(
            DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(TITULO)
                .addGap(44, 44, 44)
                .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                        .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtNombreTaller, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtFieldTituloConvocatoria, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtNombreTaller2, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel11)
                                    .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                                .addGap(33, 33, 33)
                                .addComponent(txtNombreTaller1, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(DialogGestionConvocatoriasLayout.createSequentialGroup()
                        .addComponent(dateChooserFechaInscripcion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(36, 36, 36)
                        .addComponent(dateChooserFechaLimite, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(59, 59, 59)
                .addComponent(jSeparator4, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnPublicar)
                    .addGroup(DialogGestionConvocatoriasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(btnModificar)
                        .addComponent(btnEliminarConvocatoria)
                        .addComponent(btnLimpiarConvocatorias)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator5, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 9, Short.MAX_VALUE)
                .addComponent(TITULO1)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 144, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        btnInscribirme.setText("Inscribirse al Evento/Taller");

        TITULO6.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO6.setText("Inscripción a Eventos/Talleres");

        tblTalleresDisponibles.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane11.setViewportView(tblTalleresDisponibles);

        TITULO7.setText("Eventos/Talleres Disponibles:");

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane10.setViewportView(jTable1);

        btnDesinscribirme.setText("Anular Inscripción");

        javax.swing.GroupLayout DialogInscripcionEventoTallerLayout = new javax.swing.GroupLayout(DialogInscripcionEventoTaller.getContentPane());
        DialogInscripcionEventoTaller.getContentPane().setLayout(DialogInscripcionEventoTallerLayout);
        DialogInscripcionEventoTallerLayout.setHorizontalGroup(
            DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogInscripcionEventoTallerLayout.createSequentialGroup()
                .addGroup(DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogInscripcionEventoTallerLayout.createSequentialGroup()
                        .addGap(12, 12, 12)
                        .addGroup(DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(TITULO6)
                            .addComponent(TITULO7))
                        .addGap(0, 647, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogInscripcionEventoTallerLayout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane11, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jScrollPane10, javax.swing.GroupLayout.Alignment.TRAILING))))
                .addContainerGap())
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogInscripcionEventoTallerLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogInscripcionEventoTallerLayout.createSequentialGroup()
                        .addComponent(btnInscribirme)
                        .addGap(311, 311, 311))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogInscripcionEventoTallerLayout.createSequentialGroup()
                        .addComponent(btnDesinscribirme)
                        .addGap(328, 328, 328))))
        );
        DialogInscripcionEventoTallerLayout.setVerticalGroup(
            DialogInscripcionEventoTallerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogInscripcionEventoTallerLayout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(TITULO6)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(TITULO7)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane11, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(26, 26, 26)
                .addComponent(btnInscribirme)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane10, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(btnDesinscribirme)
                .addContainerGap(17, Short.MAX_VALUE))
        );

        jLabel14.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        jLabel14.setText("Descripción Evidencia:");

        TITULO2.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO2.setText("Gestión de Evidencias para: [Nombre Taller/Evento]");

        tblEvidencias.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane6.setViewportView(tblEvidencias);

        txtNombreTaller4.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller4.setText("Archivo:");

        txtNombreTaller5.setFont(new java.awt.Font("Segoe UI Emoji", 0, 12)); // NOI18N
        txtNombreTaller5.setText("Título Evidencia:");

        TITULO3.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        TITULO3.setText("Evidencias Subidas");

        txtFieldTituloEvidencia.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtFieldTituloEvidenciaActionPerformed(evt);
            }
        });

        jFileChooser1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFileChooser1ActionPerformed(evt);
            }
        });

        taDescripcionEvidencia.setColumns(20);
        taDescripcionEvidencia.setRows(5);
        jScrollPane7.setViewportView(taDescripcionEvidencia);

        btnSeleccionarArchivo.setText("Seleccionar Archivo");

        btnSubirEvidencia.setText("Subir Evidencia");

        btnDescargarEvidencia.setText("Descargar Evidencia");

        btnEliminarEvidencia.setText("Eliminar Evidencia");

        javax.swing.GroupLayout DialogGestionEvidenciasLayout = new javax.swing.GroupLayout(DialogGestionEvidencias.getContentPane());
        DialogGestionEvidencias.getContentPane().setLayout(DialogGestionEvidenciasLayout);
        DialogGestionEvidenciasLayout.setHorizontalGroup(
            DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                        .addComponent(TITULO2)
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                        .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                                .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel14)
                                    .addComponent(txtNombreTaller5))
                                .addGap(14, 14, 14)
                                .addComponent(txtFieldTituloEvidencia, javax.swing.GroupLayout.PREFERRED_SIZE, 210, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jScrollPane7))
                        .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                                .addGap(60, 60, 60)
                                .addComponent(txtNombreTaller4)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, DialogGestionEvidenciasLayout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 45, Short.MAX_VALUE)
                                .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 449, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(20, 20, 20))))
                    .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                        .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jSeparator6)
                            .addComponent(TITULO3)
                            .addComponent(jScrollPane6)
                            .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                                .addComponent(btnSeleccionarArchivo)
                                .addGap(97, 97, 97)
                                .addComponent(btnSubirEvidencia)
                                .addGap(88, 88, 88)
                                .addComponent(btnDescargarEvidencia)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 131, Short.MAX_VALUE)
                                .addComponent(btnEliminarEvidencia)))
                        .addGap(0, 0, Short.MAX_VALUE))))
        );
        DialogGestionEvidenciasLayout.setVerticalGroup(
            DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                        .addGap(38, 38, 38)
                        .addComponent(txtNombreTaller4, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jFileChooser1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE))
                    .addGroup(DialogGestionEvidenciasLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(TITULO2)
                        .addGap(18, 18, 18)
                        .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(txtNombreTaller5, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtFieldTituloEvidencia, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addComponent(jLabel14)
                        .addGap(8, 8, 8)
                        .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 190, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(18, 18, 18)
                .addComponent(jSeparator6, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(TITULO3)
                .addGap(18, 18, 18)
                .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 160, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(DialogGestionEvidenciasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnSeleccionarArchivo)
                    .addComponent(btnSubirEvidencia)
                    .addComponent(btnDescargarEvidencia)
                    .addComponent(btnEliminarEvidencia))
                .addGap(496, 496, 496))
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("AcademicPlus - Ventana Principal");
        setPreferredSize(new java.awt.Dimension(800, 800));

        panelGeneral.setLayout(new java.awt.GridLayout(2, 0));

        panelEncabezado.setMinimumSize(new java.awt.Dimension(20, 40));
        panelEncabezado.setLayout(new java.awt.GridLayout(3, 0));

        lblBienvenida.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        lblBienvenida.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblBienvenida.setText("Bienvenido al Sistema");
        lblBienvenida.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        panelEncabezado.add(lblBienvenida);
        panelEncabezado.add(jSeparator1);

        jLabel24.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel24.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/usuario_muestra.png"))); // NOI18N
        jLabel24.setText("AcademicPlus");
        panelEncabezado.add(jLabel24);

        panelGeneral.add(panelEncabezado);

        panelEstatus.setLayout(new java.awt.GridLayout(5, 1));

        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("Estatus del usuario");
        panelEstatus.add(jLabel1);

        lblNombre.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblNombre.setText("Nombre: ");
        panelEstatus.add(lblNombre);

        lblCorreo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblCorreo.setText("Correo: ");
        lblCorreo.setPreferredSize(new java.awt.Dimension(50, 16));
        panelEstatus.add(lblCorreo);

        lblRol.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblRol.setText("Rol: ");
        panelEstatus.add(lblRol);

        lblNumControl.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblNumControl.setText("Número de control: ");
        panelEstatus.add(lblNumControl);

        panelGeneral.add(panelEstatus);

        menuArchivo.setText("Archivo");
        menuBarraPrincipal.add(menuArchivo);

        menuGestion.setText("Gestión");

        opcionUsuarios.setText("Usuarios");
        opcionUsuarios.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionUsuariosActionPerformed(evt);
            }
        });
        menuGestion.add(opcionUsuarios);

        opcionEventos.setText("Eventos");
        opcionEventos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionEventosActionPerformed(evt);
            }
        });
        menuGestion.add(opcionEventos);

        opcionTalleres.setText("Talleres");
        opcionTalleres.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionTalleresActionPerformed(evt);
            }
        });
        menuGestion.add(opcionTalleres);

        opcionConvocatorias.setText("Convocatorias");
        opcionConvocatorias.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionConvocatoriasActionPerformed(evt);
            }
        });
        menuGestion.add(opcionConvocatorias);

        opcionEvidencias.setText("Evidencias");
        opcionEvidencias.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionEvidenciasActionPerformed(evt);
            }
        });
        menuGestion.add(opcionEvidencias);

        menuBarraPrincipal.add(menuGestion);

        menuReportes.setText("Reportes");
        menuBarraPrincipal.add(menuReportes);

        menuInscripcion.setText("Inscripción");

        opcionInscripcion.setText("Realizar una inscripción");
        opcionInscripcion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionInscripcionActionPerformed(evt);
            }
        });
        menuInscripcion.add(opcionInscripcion);

        menuBarraPrincipal.add(menuInscripcion);

        menuAyuda.setText("Ayuda");

        opcionAyuda.setText("Manual y documentación");
        opcionAyuda.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionAyudaActionPerformed(evt);
            }
        });
        menuAyuda.add(opcionAyuda);

        menuBarraPrincipal.add(menuAyuda);

        menuSalir.setText("Salir");

        opcionCerrarSesion.setText("Cerrar sesión");
        opcionCerrarSesion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionCerrarSesionActionPerformed(evt);
            }
        });
        menuSalir.add(opcionCerrarSesion);

        opcionSalir.setText("Salir");
        opcionSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                opcionSalirActionPerformed(evt);
            }
        });
        menuSalir.add(opcionSalir);

        menuBarraPrincipal.add(menuSalir);

        setJMenuBar(menuBarraPrincipal);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelGeneral, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 800, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelGeneral, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void opcionInscripcionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionInscripcionActionPerformed
        DialogInscripcionEventoTaller.setVisible(true);
        DialogInscripcionEventoTaller.setSize(900, 600);
        DialogInscripcionEventoTaller.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionInscripcionActionPerformed

    private void opcionUsuariosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionUsuariosActionPerformed
        // TODO add your handling code here:
        DialogGestionUsuarios.setVisible(true);
        DialogGestionUsuarios.setSize(850,550);
        DialogGestionUsuarios.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionUsuariosActionPerformed

    private void opcionCerrarSesionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionCerrarSesionActionPerformed
        // TODO add your handling code here:
        VentanaLogin login = new VentanaLogin();
        login.setVisible(true);
        login.setLocationRelativeTo(null);
        dispose();
    }//GEN-LAST:event_opcionCerrarSesionActionPerformed

    private void opcionSalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionSalirActionPerformed
        // TODO add your handling code here:
        System.exit(0);
    }//GEN-LAST:event_opcionSalirActionPerformed

    private void opcionAyudaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionAyudaActionPerformed
        // TODO add your handling code here:
        try {
            try {
                Desktop.getDesktop().browse(new URI("https://github.com/jangelmm/AcademicPlus.git"));
            } catch (IOException ex) {
                Logger.getLogger(VentanaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (URISyntaxException ex) {
            Logger.getLogger(VentanaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_opcionAyudaActionPerformed

    private void cboURolActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cboURolActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cboURolActionPerformed

    private void txtUNombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtUNombreActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtUNombreActionPerformed

    private void opcionEventosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionEventosActionPerformed
        // TODO add your handling code here:
        DialogGestionEventos.setVisible(true);
        DialogGestionEventos.setSize(1050, 650);
        DialogGestionEventos.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionEventosActionPerformed

    private void cboEstadoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cboEstadoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cboEstadoActionPerformed

    private void txtENombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtENombreActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtENombreActionPerformed

    private void txtUEmailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtUEmailActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtUEmailActionPerformed

    private void txtUNumControlActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtUNumControlActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtUNumControlActionPerformed

    private void btnAgregarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAgregarActionPerformed
        // TODO add your handling code here:
        // Crear una instancia de la entidad
        Usuarios nuevo = new Usuarios();
        nuevo.setNombre(txtUNombre.getText());
        nuevo.setCorreo(txtUEmail.getText());
        nuevo.setContrasenaHash(new String(passContrasena.getPassword()));
        nuevo.setRol(cboURol.getSelectedItem().toString());
        nuevo.setNumeroControl(txtUNumControl.getText());

        try {
            UsuariosJpaController controller = new UsuariosJpaController(Conexion.getEMF());
            controller.create(nuevo); // Método de instancia, no static
            cargarUsuariosEnTabla(); // Refresca la tabla
            limpiarCamposUsuario();  // Limpia los campos del formulario
            JOptionPane.showMessageDialog(this, "Usuario insertado exitosamente");
        } catch (Exception e) {
            System.err.println("Error al insertar el usuario: " + e.getMessage());
        }
    }//GEN-LAST:event_btnAgregarActionPerformed

    private void btnActualizarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnActualizarActionPerformed
        // TODO add your handling code here:
        if (txtUID.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Debe seleccionar un usuario para modificar.");
            return;
        }

        try {
            int id = Integer.parseInt(txtUID.getText());

            // Crear controlador JPA
            UsuariosJpaController controller = new UsuariosJpaController(Conexion.getEMF());
            
            // Obtener el usuario desde la base de datos
            Usuarios usuarioExistente = controller.findUsuarios(id);

            if (usuarioExistente != null) {
                // Actualizar los valores
                usuarioExistente.setNombre(txtUNombre.getText());
                usuarioExistente.setCorreo(txtUEmail.getText());
                usuarioExistente.setRol(cboURol.getSelectedItem().toString());
                usuarioExistente.setNumeroControl(txtUNumControl.getText());
                
                String contrasena = "";
                for (char e : passContrasena.getPassword()) {
                    contrasena += e;
                }
                
                usuarioExistente.setContrasenaHash(contrasena);
                
                // Guardar los cambios
                controller.edit(usuarioExistente);

                cargarUsuariosEnTabla();
                limpiarCamposUsuario();
                JOptionPane.showMessageDialog(this, "Usuario modificado exitosamente");
            } else {
                JOptionPane.showMessageDialog(this, "El usuario no fue encontrado.");
            }
        } catch (Exception e) {
            System.err.println("Error al actualizar usuario: " + e.getMessage());
        }
    }//GEN-LAST:event_btnActualizarActionPerformed

    private void btnEliminarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarActionPerformed
        if (txtUID.getText().isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionUsuarios, "Por favor, seleccione un usuario de la tabla para eliminar.", "Ningún Usuario Seleccionado", JOptionPane.WARNING_MESSAGE);
            return;
        }

        int idUsuarioAEliminar;
        try {
            idUsuarioAEliminar = Integer.parseInt(txtUID.getText());
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionUsuarios, "El ID del usuario no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        int idUsuarioGenerico = 1; // ID del usuario genérico (sistema)
        if (idUsuarioAEliminar == idUsuarioGenerico) {
            JOptionPane.showMessageDialog(DialogGestionUsuarios, "No se puede eliminar el usuario genérico del sistema.", "Operación no permitida", JOptionPane.ERROR_MESSAGE);
            return;
        }

        if (usuarioActual != null && usuarioActual.getIdUsuario() == idUsuarioAEliminar) {
            JOptionPane.showMessageDialog(DialogGestionUsuarios, "No puedes eliminar el usuario con el que has iniciado sesión.", "Operación no permitida", JOptionPane.WARNING_MESSAGE);
            return;
        }

        int confirm = JOptionPane.showConfirmDialog(DialogGestionUsuarios,
            "¿Está seguro de que desea eliminar este usuario?\nTodas sus referencias serán reasignadas al usuario genérico del sistema.",
            "Confirmar Eliminación", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);

        if (confirm == JOptionPane.YES_OPTION) {
            EntityManagerFactory emf = Conexion.getEMF();
            EntityManager em = emf.createEntityManager();

            try {
                em.getTransaction().begin();

                // Obtener la entidad del usuario genérico
                Usuarios usuarioGenericoEntidad = em.find(Usuarios.class, idUsuarioGenerico);
                if (usuarioGenericoEntidad == null) {
                    JOptionPane.showMessageDialog(DialogGestionUsuarios, "No se encontró el usuario genérico con ID: " + idUsuarioGenerico, "Error Crítico", JOptionPane.ERROR_MESSAGE);
                    if (em.getTransaction().isActive()) {
                        em.getTransaction().rollback();
                    }
                    return;
                }

                // 1. Reasignar ComentariosRevisionTaller
                em.createQuery("UPDATE ComentariosRevisionTaller c SET c.idUsuarioComentarista = :nuevoUsuario WHERE c.idUsuarioComentarista.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 2. Reasignar Notificaciones
                em.createQuery("UPDATE Notificaciones n SET n.idUsuarioDestinatario = :nuevoUsuario WHERE n.idUsuarioDestinatario.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 3. Reasignar Evidencias
                em.createQuery("UPDATE Evidencias e SET e.idUsuarioSubio = :nuevoUsuario WHERE e.idUsuarioSubio.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 4. Reasignar Talleres (como proponente)
                em.createQuery("UPDATE Talleres t SET t.idUsuarioProponente = :nuevoUsuario WHERE t.idUsuarioProponente.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 5. Reasignar Eventos (como docente responsable)
                // Nota: Si idDocenteResponsable es opcional y prefieres ponerlo a null en lugar de reasignar,
                // la consulta sería: UPDATE Eventos ev SET ev.idDocenteResponsable = NULL WHERE ev.idDocenteResponsable.idUsuario = :actualId
                // Pero para mantener la consistencia de reasignar:
                em.createQuery("UPDATE Eventos ev SET ev.idDocenteResponsable = :nuevoUsuario WHERE ev.idDocenteResponsable.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 6. Reasignar BitacorasEventos
                em.createQuery("UPDATE BitacorasEventos be SET be.idUsuarioRegistra = :nuevoUsuario WHERE be.idUsuarioRegistra.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 7. Reasignar Convocatorias
                em.createQuery("UPDATE Convocatorias conv SET conv.idUsuarioPublica = :nuevoUsuario WHERE conv.idUsuarioPublica.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // 8. Reasignar EventoParticipantesTalleres (como tallerista/participante)
                em.createQuery("UPDATE EventoParticipantesTalleres ept SET ept.idTallerista = :nuevoUsuario WHERE ept.idTallerista.idUsuario = :actualId")
                  .setParameter("nuevoUsuario", usuarioGenericoEntidad)
                  .setParameter("actualId", idUsuarioAEliminar)
                  .executeUpdate();

                // Finalmente, eliminar el usuario
                Usuarios usuarioAEliminarObj = em.find(Usuarios.class, idUsuarioAEliminar);
                if (usuarioAEliminarObj != null) {
                    em.remove(usuarioAEliminarObj);
                } else {
                    JOptionPane.showMessageDialog(DialogGestionUsuarios, "El usuario a eliminar no fue encontrado (ID: " + idUsuarioAEliminar + "). La reasignación de referencias pudo haberse realizado parcialmente.", "Advertencia", JOptionPane.WARNING_MESSAGE);
                    if (em.getTransaction().isActive()) {
                        // Considera si quieres hacer commit de las reasignaciones o rollback si el usuario no se encuentra.
                        // Si el objetivo es limpiar referencias incluso si el usuario ya fue borrado por otro medio, haz commit.
                        // Si es un error que el usuario no exista, haz rollback.
                        // Por seguridad, si el usuario no está, pero las FKs podrían apuntar a él, hacer commit de las reasignaciones es más seguro para la integridad.
                        // Sin embargo, si el usuario *debería* estar y no está, es un estado inconsistente.
                        // Optaremos por rollback en este caso si el usuario no se encuentra para eliminar.
                        em.getTransaction().rollback();
                    }
                    return;
                }

                em.getTransaction().commit();

                cargarUsuariosEnTabla(); // Refresca la tabla
                limpiarCamposUsuario();  // Limpia los campos del formulario
                JOptionPane.showMessageDialog(DialogGestionUsuarios, "Usuario eliminado exitosamente y sus registros han sido reasignados.", "Eliminación Exitosa", JOptionPane.INFORMATION_MESSAGE);

            } catch (Exception e) { // Captura más genérica para errores de JPQL o de BD
                if (em.getTransaction().isActive()) {
                    em.getTransaction().rollback();
                }
                System.err.println("Error detallado al eliminar el usuario: " + e.toString());
                e.printStackTrace(); 
                JOptionPane.showMessageDialog(DialogGestionUsuarios, "Error al eliminar el usuario: " + e.getMessage(), "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
            } finally {
                if (em != null && em.isOpen()) {
                    em.close(); 
                }
            }
        }

    }//GEN-LAST:event_btnEliminarActionPerformed

    private void btnLimpiarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLimpiarActionPerformed
        // TODO add your handling code here:
        limpiarCamposUsuario();
    }//GEN-LAST:event_btnLimpiarActionPerformed
    private void limpiarCamposUsuario() {
        txtUID.setText("");
        txtUNombre.setText("");
        txtUEmail.setText("");
        cboURol.setSelectedIndex(0);
        txtUNumControl.setText("");
    }
    
    private void btnELimpiarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnELimpiarActionPerformed
        // TODO add your handling code here:
        limpiarCamposEventos();
    }//GEN-LAST:event_btnELimpiarActionPerformed
    private void limpiarCamposEventos() {
        txtEID.setText("");
        txtENombre.setText("");
        txtEDescripcion.setText("");
        txtLugar.setText("");
        cboEstado.setSelectedIndex(0);
        calendario.setDate(new java.util.Date()); // Establece la fecha actual
        txtEInicio.setText("");
        txtEFin.setText("");
    }
    
    private void btnECrearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnECrearActionPerformed
        // TODO add your handling code here:
        // Crear una instancia de la entidad
        Eventos nuevo = new Eventos();
        nuevo.setNombre(txtENombre.getText());
        nuevo.setDescripcionPublica(txtEDescripcion.getText());
        nuevo.setLugarEvento(txtLugar.getText());
        nuevo.setEstadoEvento(cboEstado.getSelectedItem().toString());
        nuevo.setFechaEvento(calendario.getDate());

        // Convertir las horas de tipo String (HH:mm) a Time
        try {
            // Obtener las horas como String desde los JTextField
            String horaInicioStr = txtEInicio.getText();  // Formato: "HH:mm" (ejemplo "10:00")
            String horaFinStr = txtEFin.getText();        // Formato: "HH:mm" (ejemplo "12:00")

            // Añadir ":00" para hacer que el formato sea "HH:mm:ss" (ejemplo "10:00:00")
            //horaInicioStr += ":00";
            //horaFinStr += ":00";

            // Convertir el String a Time
            Time horaInicio = Time.valueOf(horaInicioStr);  // Convierte a Time
            Time horaFin = Time.valueOf(horaFinStr);        // Convierte a Time

            // Asignar las horas al objeto evento
            nuevo.setHoraInicioEvento(horaInicio);
            nuevo.setHoraFinEvento(horaFin);

        } catch (IllegalArgumentException e) {
            JOptionPane.showMessageDialog(this, "Error al formatear la hora. Asegúrese de que la hora esté en formato HH:mm.");
            return; // Si hay un error, salir del método
        }
        
        try {
            EventosJpaController controller = new EventosJpaController(Conexion.getEMF());
            controller.create(nuevo); // Método de instancia, no static
            cargarEventosEnTabla(); // Refresca la tabla
            limpiarCamposEventos();  // Limpia los campos del formulario
            JOptionPane.showMessageDialog(this, "Evento insertado exitosamente");
        } catch (Exception e) {
            System.err.println("Error al insertar el evento: " + e.getMessage());
        }
    }//GEN-LAST:event_btnECrearActionPerformed

    private void btnEModificarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEModificarActionPerformed
        // TODO add your handling code here:
        // Verificar si se ha seleccionado un evento
        if (txtEID.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Debe seleccionar un evento para modificar.");
            return;
        }

        try {
            // Obtener el ID del evento desde el campo de texto
            int id = Integer.parseInt(txtEID.getText());

            // Crear el controlador JPA para eventos
            EventosJpaController controller = new EventosJpaController(Conexion.getEMF());

            // Obtener el evento desde la base de datos
            Eventos eventoExistente = controller.findEventos(id);

            if (eventoExistente != null) {
                // Actualizar los valores con los nuevos datos ingresados en el formulario
                eventoExistente.setNombre(txtENombre.getText());
                eventoExistente.setDescripcionPublica(txtEDescripcion.getText());
                eventoExistente.setLugarEvento(txtLugar.getText());
                eventoExistente.setEstadoEvento(cboEstado.getSelectedItem().toString());

                // Obtener la fecha del JCalendar y actualizar
                eventoExistente.setFechaEvento(calendario.getDate());

                // Convertir las horas de tipo String (HH:mm) a Time
                try {
                    String horaInicioStr = txtEInicio.getText(); // Formato: "HH:mm"
                    String horaFinStr = txtEFin.getText();       // Formato: "HH:mm"

                    // Añadir ":00" para convertir a "HH:mm:ss"
                    horaInicioStr += ":00";
                    horaFinStr += ":00";

                    // Convertir a tipo Time
                    Time horaInicio = Time.valueOf(horaInicioStr);
                    Time horaFin = Time.valueOf(horaFinStr);

                    // Actualizar las horas del evento
                    eventoExistente.setHoraInicioEvento(horaInicio);
                    eventoExistente.setHoraFinEvento(horaFin);

                } catch (IllegalArgumentException e) {
                    JOptionPane.showMessageDialog(this, "Error al formatear las horas. Asegúrese de que las horas estén en formato HH:mm.");
                    return; // Si hay error en el formato de horas, salir del método
                }
                controller.edit(eventoExistente);
                cargarEventosEnTabla();
                limpiarCamposEventos();
                // Mensaje de éxito
                JOptionPane.showMessageDialog(this, "Evento modificado exitosamente");
            } else {
                // Si no se encuentra el evento en la base de datos
                JOptionPane.showMessageDialog(this, "El evento no fue encontrado.");
            }
        } catch (Exception e) {
            System.err.println("Error al actualizar evento: " + e.getMessage());
        }
    }//GEN-LAST:event_btnEModificarActionPerformed

    private void txtFieldTituloConvocatoriaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldTituloConvocatoriaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldTituloConvocatoriaActionPerformed

    private void txtFieldTituloEvidenciaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldTituloEvidenciaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldTituloEvidenciaActionPerformed

    private void jFileChooser1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFileChooser1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jFileChooser1ActionPerformed

    private void txtFieldNombreTallerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldNombreTallerActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldNombreTallerActionPerformed

    private void txtFieldMaterial_ReqActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtFieldMaterial_ReqActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtFieldMaterial_ReqActionPerformed

    private void opcionTalleresActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionTalleresActionPerformed
        DialogGestionTalleres.setVisible(true);
        DialogGestionTalleres.setSize(1050, 650);
        DialogGestionTalleres.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionTalleresActionPerformed

    private void opcionConvocatoriasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionConvocatoriasActionPerformed
        DialogGestionConvocatorias.setVisible(true);
        DialogGestionConvocatorias.setSize(950,550);
        DialogGestionConvocatorias.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionConvocatoriasActionPerformed

    private void opcionEvidenciasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_opcionEvidenciasActionPerformed
        DialogGestionEvidencias.setVisible(true);
        DialogGestionEvidencias.setSize(950, 650);
        DialogGestionEvidencias.setLocationRelativeTo(this);
    }//GEN-LAST:event_opcionEvidenciasActionPerformed

    private void btnEEliminarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEEliminarActionPerformed
        if (txtEID.getText().isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionEventos, "Por favor, seleccione un evento de la tabla para eliminar.", "Ningún Evento Seleccionado", JOptionPane.WARNING_MESSAGE);
            return;
        }

        int eventoId;
        try {
            eventoId = Integer.parseInt(txtEID.getText());
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionEventos, "El ID del evento no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        int confirm = JOptionPane.showConfirmDialog(DialogGestionEventos,
            "¿Está seguro de que desea eliminar este evento?\nTODOS los datos asociados (evidencias, bitácoras, participantes) también serán eliminados permanentemente.",
            "Confirmar Eliminación Definitiva", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);

        if (confirm == JOptionPane.YES_OPTION) {
            EntityManagerFactory emf = Conexion.getEMF();
            EntityManager em = emf.createEntityManager(); // Usaremos este EM para la transacción manual
            EventosJpaController eventosController = new EventosJpaController(emf);

            try {
                em.getTransaction().begin();

                Eventos eventoAEliminar = em.find(Eventos.class, eventoId); // Obtener el evento dentro de la transacción

                if (eventoAEliminar == null) {
                    throw new NonexistentEntityException("El evento con ID " + eventoId + " no existe.");
                }

                // 1. Eliminar Evidencias asociadas
                if (eventoAEliminar.getEvidenciasList() != null && !eventoAEliminar.getEvidenciasList().isEmpty()) {
                    EvidenciasJpaController evidenciasController = new EvidenciasJpaController(emf);
                    // Crear una copia para evitar ConcurrentModificationException si el controlador modifica la lista original
                    List<Evidencias> evidenciasCopia = new ArrayList<>(eventoAEliminar.getEvidenciasList());
                    for (Evidencias evidencia : evidenciasCopia) {
                        // Se recomienda que el controller.destroy() se llame fuera de la transacción principal
                        // o que el controller use el mismo EntityManager si se pasa como argumento.
                        // Para simplicidad, si el controller.destroy abre su propia tx, esto es problemático.
                        // Es mejor usar em.remove() directamente aquí si es seguro y CascadeType.ALL lo permite.
                        // O, si EvidenciasJpaController.destroy() es transaccional, llamarlo fuera o manejar tx anidadas (complejo).
                        // La forma más segura es em.remove() si estamos seguros de las cascadas o dependencias.
                        // Dado que EvidenciasJpaController.destroy maneja sus propias relaciones:
                        // Aquí usaremos em.remove(em.merge(evidencia)) para asegurar que la entidad está manejada por el EM actual.
                        Evidencias evManaged = em.merge(evidencia); // Asegurar que la entidad esté gestionada por 'em'
                        em.remove(evManaged);
                    }
                    // eventoAEliminar.getEvidenciasList().clear(); // Opcional, para reflejar en el objeto Java
                }

                // 2. Eliminar BitacorasEventos asociadas
                if (eventoAEliminar.getBitacorasEventosList() != null && !eventoAEliminar.getBitacorasEventosList().isEmpty()) {
                    List<BitacorasEventos> bitacorasCopia = new ArrayList<>(eventoAEliminar.getBitacorasEventosList());
                    for (BitacorasEventos bitacora : bitacorasCopia) {
                        BitacorasEventos bManaged = em.merge(bitacora);
                        em.remove(bManaged);
                    }
                    // eventoAEliminar.getBitacorasEventosList().clear();
                }

                // 3. Eliminar EventoParticipantesTalleres asociados
                if (eventoAEliminar.getEventoParticipantesTalleresList() != null && !eventoAEliminar.getEventoParticipantesTalleresList().isEmpty()) {
                    List<EventoParticipantesTalleres> participantesCopia = new ArrayList<>(eventoAEliminar.getEventoParticipantesTalleresList());
                    for (EventoParticipantesTalleres participante : participantesCopia) {
                         EventoParticipantesTalleres eptManaged = em.merge(participante);
                         em.remove(eptManaged);
                    }
                    // eventoAEliminar.getEventoParticipantesTalleresList().clear();
                }

                // El controlador de eventos también maneja las notificaciones estableciendo FKs a NULL,
                // y desvincula de ConvocatoriaOrigen y DocenteResponsable.
                // No es necesario hacerlo manualmente aquí si se va a llamar a eventosController.destroy()
                // PERO, dado que el controller.destroy() hace su propio chequeo de huérfanos,
                // y ya estamos gestionando los hijos aquí, podemos eliminar el evento directamente con el EntityManager.

                em.remove(eventoAEliminar); // Eliminar el evento principal

                em.getTransaction().commit(); // Confirmar todos los cambios (eliminación de hijos y del padre)

                cargarEventosEnTabla(); 
                limpiarCamposEventos();  
                JOptionPane.showMessageDialog(DialogGestionEventos, "Evento y todos sus datos asociados eliminados exitosamente.", "Eliminación Exitosa", JOptionPane.INFORMATION_MESSAGE);

            } catch (NonexistentEntityException ex) {
                if (em.getTransaction().isActive()) em.getTransaction().rollback();
                JOptionPane.showMessageDialog(DialogGestionEventos, "El evento que intenta eliminar ya no existe.", "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
            } catch (Exception e) { // Captura otras posibles excepciones
                if (em.getTransaction().isActive()) em.getTransaction().rollback();
                JOptionPane.showMessageDialog(DialogGestionEventos, "Ocurrió un error al intentar eliminar el evento: " + e.getMessage(), "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                e.printStackTrace();
            } finally {
                if (em != null && em.isOpen()) {
                    em.close();
                }
            }
        }
    }//GEN-LAST:event_btnEEliminarActionPerformed

    private void cboEstadoTaller2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cboEstadoTaller2ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_cboEstadoTaller2ActionPerformed

    private void btnAgregarTallerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAgregarTallerActionPerformed
        // 1. Validar campos obligatorios
        String nombreTaller = txtFieldNombreTaller.getText().trim();
        if (nombreTaller.isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "El nombre del taller es obligatorio.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            txtFieldNombreTaller.requestFocus();
            return;
        }

        // Validación para el ponente
        if (cboPonente.getSelectedItem() == null || !(cboPonente.getSelectedItem() instanceof Usuarios)) {
            // Podrías tener un item placeholder como "Seleccione un ponente..." que sea un String o un Usuario nulo.
            // Si el item es null o no es una instancia de Usuario, entonces no es válido.
            Object itemPonente = cboPonente.getSelectedItem();
            if (itemPonente == null || itemPonente.toString().equals("-- Seleccione Ponente --")) { // Ejemplo de placeholder
                 JOptionPane.showMessageDialog(DialogGestionTalleres, "Debe seleccionar un ponente válido.", "Ponente no seleccionado", JOptionPane.WARNING_MESSAGE);
                 return;
            }
            // Si el primer item es un Usuario válido y está seleccionado, esta condición no se cumple.
            // Si es un String placeholder y se selecciona, !(itemPonente instanceof Usuarios) será true.
        }

        // Validación para el estado del taller
        // Asumiendo que cboEstadoTaller2 es tu JComboBox para el estado
        if (cboEstadoTaller2.getSelectedItem() == null || cboEstadoTaller2.getSelectedItem().toString().trim().isEmpty() || cboEstadoTaller2.getSelectedItem().toString().equals("-- Seleccione Estado --")) { // Ejemplo de placeholder
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Debe seleccionar un estado para el taller.", "Estado no seleccionado", JOptionPane.WARNING_MESSAGE);
            return;
        }

        // 2. Crear y poblar el objeto Talleres
        Talleres nuevoTaller = new Talleres();
        nuevoTaller.setNombre(nombreTaller);

        // Campos que existen en la entidad Talleres
        // Asumiendo que txtDescripcionTaller es tu JTextArea. Si es taDescripcionTaller, usa ese nombre.
        if (txtDescripcionTaller != null) {
            nuevoTaller.setDescripcionPublica(txtDescripcionTaller.getText().trim()); 
        } else if (txtDescripcionTaller != null) { // Nombre del componente en tu diseño de VentanaPrincipal
            nuevoTaller.setDescripcionPublica(txtDescripcionTaller.getText().trim());
        }

        nuevoTaller.setRequisitosMateriales(txtFieldMaterial_Req.getText().trim());

        // Nuevo campo para la ruta del manual
        if (txtManualRuta != null) { // Asegúrate que txtManualRuta existe en tu UI
            nuevoTaller.setManualRuta(txtManualRuta.getText().trim());
        }

        nuevoTaller.setEstado((String) cboEstadoTaller2.getSelectedItem()); // Usar el nombre correcto del JComboBox de estado

        Usuarios ponenteSeleccionado = (Usuarios) cboPonente.getSelectedItem();
        nuevoTaller.setIdUsuarioProponente(ponenteSeleccionado);

        // Establecer fechas de creación y modificación
        Date fechaActual = new Date();
        nuevoTaller.setFechaCreacion(fechaActual);
        nuevoTaller.setUltimaModificacion(fechaActual);

        // Los campos como Cupo, Fecha del Taller, Duración, Evento Asociado directo
        // han sido omitidos ya que indicaste que eliminaste los que no servían
        // y estos no tenían correspondencia directa en la entidad Talleres.

        // 3. Persistir el taller
        try {
            TalleresJpaController controller = new TalleresJpaController(Conexion.getEMF());
            controller.create(nuevoTaller);

            JOptionPane.showMessageDialog(DialogGestionTalleres, "Taller '" + nuevoTaller.getNombre() + "' agregado exitosamente.", "Éxito", JOptionPane.INFORMATION_MESSAGE);

            cargarTalleresEnTabla(); // Refresca la tabla de talleres
            limpiarCamposFormularioTaller(); // Limpia los campos del formulario

        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Error al guardar el taller: " + e.getMessage(), "Error de Persistencia", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }//GEN-LAST:event_btnAgregarTallerActionPerformed

    private void tblTalleresMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblTalleresMouseClicked

        int filaSeleccionada = tblTalleres.getSelectedRow();

        if (filaSeleccionada != -1) {
            try {
                // Asumimos que la columna 0 de tblTalleres contiene el ID del Taller
                Object idObjeto = tblTalleres.getValueAt(filaSeleccionada, 0);
                if (idObjeto == null) {
                    JOptionPane.showMessageDialog(DialogGestionTalleres, "No se pudo obtener el ID del taller seleccionado.", "Error", JOptionPane.ERROR_MESSAGE);
                    return;
                }

                int idTaller = Integer.parseInt(idObjeto.toString());

                // Opcional: Si tienes un JTextField para el ID del taller en el formulario:
                // if (txtIdTallerDialog != null) { 
                //    txtIdTallerDialog.setText(String.valueOf(idTaller));
                // }

                TalleresJpaController controller = new TalleresJpaController(Conexion.getEMF());
                Talleres tallerSeleccionado = controller.findTalleres(idTaller);

                if (tallerSeleccionado != null) {
                    // --- Poblar campos que SÍ existen en la entidad Talleres ---
                    txtFieldNombreTaller.setText(tallerSeleccionado.getNombre());

                    // JTextArea descripción
                    if (txtDescripcionTaller != null) { 
                        txtDescripcionTaller.setText(tallerSeleccionado.getDescripcionPublica());
                    }
                    // else if (taDescripcionTaller != null) { // Si el nombre del componente es diferente
                    //    taDescripcionTaller.setText(tallerSeleccionado.getDescripcionPublica());
                    // }

                    txtFieldMaterial_Req.setText(tallerSeleccionado.getRequisitosMateriales());

                    // Nuevo campo: Ruta del Manual
                    if (txtManualRuta != null) { // Asegúrate que txtManualRuta existe en tu UI
                        txtManualRuta.setText(tallerSeleccionado.getManualRuta());
                    }

                    // ComboBox Ponente (Usuarios)
                    if (cboPonente != null && tallerSeleccionado.getIdUsuarioProponente() != null) {
                        Usuarios ponenteDelTaller = tallerSeleccionado.getIdUsuarioProponente();
                        DefaultComboBoxModel<Usuarios> modeloPonente = (DefaultComboBoxModel<Usuarios>) cboPonente.getModel();
                        boolean ponenteEncontrado = false;
                        for (int i = 0; i < modeloPonente.getSize(); i++) {
                            Usuarios usuarioEnCombo = modeloPonente.getElementAt(i);
                            if (usuarioEnCombo != null && usuarioEnCombo.getIdUsuario().equals(ponenteDelTaller.getIdUsuario())) {
                                cboPonente.setSelectedIndex(i);
                                ponenteEncontrado = true;
                                break;
                            }
                        }
                        if (!ponenteEncontrado) { 
                            cboPonente.setSelectedItem(null); // O el índice de un item placeholder
                        }
                    } else if (cboPonente != null) {
                        cboPonente.setSelectedItem(null); // O el índice de un item placeholder
                    }

                    // ComboBox Estado Taller (Strings)
                    if (cboEstadoTaller2 != null) { 
                        cboEstadoTaller2.setSelectedItem(tallerSeleccionado.getEstado());
                    }
                    // else if (cboEventoAsociado2 != null) { // Si el nombre del componente es diferente
                    //    cboEventoAsociado2.setSelectedItem(tallerSeleccionado.getEstado());
                    // }

                } else {
                    JOptionPane.showMessageDialog(DialogGestionTalleres, "No se encontró el taller con ID: " + idTaller, "Taller No Encontrado", JOptionPane.WARNING_MESSAGE);
                    limpiarCamposFormularioTaller(); // Limpiar campos si no se encuentra
                }
            } catch (NumberFormatException ex) {
                JOptionPane.showMessageDialog(DialogGestionTalleres, "El ID del taller en la tabla no es un número válido.", "Error de ID en Tabla", JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
                limpiarCamposFormularioTaller();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(DialogGestionTalleres, "Error al cargar datos del taller: " + e.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
                e.printStackTrace();
                limpiarCamposFormularioTaller();
            }
        } else {
            // Opcional: Limpiar los campos si no se selecciona ninguna fila válida
            // limpiarCamposFormularioTaller();
        }
    }//GEN-LAST:event_tblTalleresMouseClicked

    private void txtManualRutaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtManualRutaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtManualRutaActionPerformed

    private void btnActualizarTallerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnActualizarTallerActionPerformed
        // 0. Verificar si se ha seleccionado un taller (y por lo tanto, hay un ID)
        // Asumiré que tienes un JTextField no editable llamado txtIdTallerDialogo para el ID.
        // Si no tienes un campo para el ID, deberás obtener el ID del taller seleccionado de alguna otra manera.
        String idTallerStr = ""; // Ejemplo: txtIdTallerDialogo.getText();

        // --- Obtener el ID del taller seleccionado ---
        // Opción A: Desde un JTextField no editable (recomendado)
        // if (txtIdTallerDialogo != null && !txtIdTallerDialogo.getText().isEmpty()) {
        //     idTallerStr = txtIdTallerDialogo.getText();
        // } else {
        //     JOptionPane.showMessageDialog(DialogGestionTalleres, "No hay un taller seleccionado para actualizar. Por favor, seleccione un taller de la tabla.", "Taller no seleccionado", JOptionPane.WARNING_MESSAGE);
        //     return;
        // }

        // Opción B: Si no tienes un campo ID y dependes de la selección de la tabla directamente (menos robusto si el usuario edita campos sin reseleccionar)
        int filaSeleccionada = tblTalleres.getSelectedRow();
        if (filaSeleccionada == -1) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Por favor, seleccione un taller de la tabla para actualizar.", "Taller no seleccionado", JOptionPane.WARNING_MESSAGE);
            return;
        }
        // Asumiendo que la columna 0 de tblTalleres contiene el ID
        Object idObjeto = tblTalleres.getValueAt(filaSeleccionada, 0);
        if (idObjeto == null) {
             JOptionPane.showMessageDialog(DialogGestionTalleres, "No se pudo obtener el ID del taller seleccionado de la tabla.", "Error", JOptionPane.ERROR_MESSAGE);
            return;
        }
        idTallerStr = idObjeto.toString();
        // --- Fin de la obtención del ID ---

        int idTaller;
        try {
            idTaller = Integer.parseInt(idTallerStr);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "El ID del taller no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        // 1. Validar campos obligatorios del formulario
        String nombreTaller = txtFieldNombreTaller.getText().trim();
        if (nombreTaller.isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "El nombre del taller es obligatorio.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            txtFieldNombreTaller.requestFocus();
            return;
        }

        if (cboPonente.getSelectedItem() == null || !(cboPonente.getSelectedItem() instanceof Usuarios)) {
            Object itemPonente = cboPonente.getSelectedItem();
            if (itemPonente == null || (itemPonente instanceof String && itemPonente.toString().startsWith("--"))) { // Asumiendo placeholder
                JOptionPane.showMessageDialog(DialogGestionTalleres, "Debe seleccionar un ponente válido.", "Ponente no seleccionado", JOptionPane.WARNING_MESSAGE);
                return;
            }
        }

        if (cboEstadoTaller2.getSelectedItem() == null || cboEstadoTaller2.getSelectedItem().toString().trim().isEmpty() || (cboEstadoTaller2.getSelectedItem() instanceof String && cboEstadoTaller2.getSelectedItem().toString().startsWith("--"))) { // Asumiendo placeholder
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Debe seleccionar un estado para el taller.", "Estado no seleccionado", JOptionPane.WARNING_MESSAGE);
            return;
        }

        // 2. Obtener la entidad Talleres existente y actualizarla
        TalleresJpaController controller = new TalleresJpaController(Conexion.getEMF());
        Talleres tallerExistente = controller.findTalleres(idTaller);

        if (tallerExistente == null) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "No se encontró el taller con ID: " + idTaller + " en la base de datos.", "Taller No Encontrado", JOptionPane.ERROR_MESSAGE);
            return;
        }

        // Actualizar los campos del objeto tallerExistente
        tallerExistente.setNombre(nombreTaller);

        // Usar el nombre correcto de tu JTextArea
        if (txtDescripcionTaller != null) { 
            tallerExistente.setDescripcionPublica(txtDescripcionTaller.getText().trim());
        } else if (txtDescripcionTaller != null) { 
            tallerExistente.setDescripcionPublica(txtDescripcionTaller.getText().trim());
        }

        tallerExistente.setRequisitosMateriales(txtFieldMaterial_Req.getText().trim());

        if (txtManualRuta != null) {
            tallerExistente.setManualRuta(txtManualRuta.getText().trim());
        }

        tallerExistente.setEstado((String) cboEstadoTaller2.getSelectedItem()); // Usa el nombre correcto de tu JComboBox de estado

        Usuarios ponenteSeleccionado = (Usuarios) cboPonente.getSelectedItem();
        tallerExistente.setIdUsuarioProponente(ponenteSeleccionado);

        tallerExistente.setUltimaModificacion(new Date()); // Actualizar fecha de modificación

        // 3. Persistir los cambios
        try {
            controller.edit(tallerExistente);
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Taller '" + tallerExistente.getNombre() + "' actualizado exitosamente.", "Éxito", JOptionPane.INFORMATION_MESSAGE);

            cargarTalleresEnTabla(); // Refresca la tabla
            limpiarCamposFormularioTaller(); // Limpia los campos del formulario

        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Error al actualizar el taller: " + e.getMessage(), "Error de Persistencia", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }//GEN-LAST:event_btnActualizarTallerActionPerformed

    private void btnElliminarTallerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnElliminarTallerActionPerformed
        // --- Obtener el ID del taller seleccionado ---
        // Usaremos la misma lógica que en btnActualizarTallerActionPerformed para obtener el ID.
        // Opción B: Obtener el ID directamente de la tabla (menos robusto si hay ediciones sin reseleccionar)
        int filaSeleccionada = tblTalleres.getSelectedRow();
        String idTallerStr;

        if (filaSeleccionada != -1) {
            // Asumiendo que la columna 0 de tblTalleres contiene el ID
            Object idObjeto = tblTalleres.getValueAt(filaSeleccionada, 0);
            if (idObjeto == null) {
                JOptionPane.showMessageDialog(DialogGestionTalleres, "No se pudo obtener el ID del taller seleccionado de la tabla.", "ID No Encontrado", JOptionPane.WARNING_MESSAGE);
                return;
            }
            idTallerStr = idObjeto.toString();
        } else {
            // Opción A: Si usas un JTextField no editable como txtIdTallerDialogo que se llena con tblTalleresMouseClicked
            // if (txtIdTallerDialogo != null && !txtIdTallerDialogo.getText().isEmpty()) {
            //     idTallerStr = txtIdTallerDialogo.getText();
            // } else {
                JOptionPane.showMessageDialog(DialogGestionTalleres, "Por favor, seleccione un taller de la tabla para eliminar.", "Taller no seleccionado", JOptionPane.WARNING_MESSAGE);
                return;
            // }
        }
        // --- Fin de la obtención del ID ---

        int idTaller;
        try {
            idTaller = Integer.parseInt(idTallerStr);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "El ID del taller no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        int confirm = JOptionPane.showConfirmDialog(DialogGestionTalleres,
            "¿Está seguro de que desea eliminar el taller con ID: " + idTaller + "?\nEsta acción podría eliminar también comentarios y participaciones asociadas.",
            "Confirmar Eliminación", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);

        if (confirm == JOptionPane.YES_OPTION) {
            TalleresJpaController controller = new TalleresJpaController(Conexion.getEMF());
            try {
                controller.destroy(idTaller); // El método destroy del JpaController maneja las relaciones

                cargarTalleresEnTabla();       // Actualiza la tabla de talleres
                limpiarCamposFormularioTaller(); // Limpia los campos del formulario
                JOptionPane.showMessageDialog(DialogGestionTalleres, "Taller eliminado exitosamente.", "Eliminación Exitosa", JOptionPane.INFORMATION_MESSAGE);

            } catch (IllegalOrphanException ex) {
                // Esta excepción es lanzada por el JpaController si encuentra "huérfanos ilegales".
                // Por ejemplo, si un ComentarioRevisionTaller tiene su campo idTaller como non-nullable
                // y CascadeType.ALL no está funcionando como se espera o la comprobación del controller es muy estricta.
                System.err.println("Detalles de IllegalOrphanException: " + ex.getMessages());
                ex.printStackTrace();
                JOptionPane.showMessageDialog(DialogGestionTalleres, 
                    "No se puede eliminar el taller porque tiene registros asociados que no pueden ser eliminados o desvinculados automáticamente.\nDetalle: " + ex.getMessage(), 
                    "Error de Eliminación (Dependencias)", 
                    JOptionPane.ERROR_MESSAGE);
            } catch (NonexistentEntityException ex) {
                JOptionPane.showMessageDialog(DialogGestionTalleres, "El taller que intenta eliminar ya no existe.", "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
            } catch (Exception e) { // Captura otras posibles excepciones
                JOptionPane.showMessageDialog(DialogGestionTalleres, "Ocurrió un error al intentar eliminar el taller: " + e.getMessage(), "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                e.printStackTrace();
            }
        }
    }//GEN-LAST:event_btnElliminarTallerActionPerformed

    private void tblConvocatoriasMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblConvocatoriasMouseClicked
        int filaSeleccionada = tblConvocatorias.getSelectedRow();

        if (filaSeleccionada != -1 && listaConvocatoriasCargadas != null && filaSeleccionada < listaConvocatoriasCargadas.size()) {
            Convocatorias convocatoriaSeleccionada = listaConvocatoriasCargadas.get(filaSeleccionada);

            // Suponiendo que tienes txtIdConvocatoriaDialogo para el ID
            // if(txtIdConvocatoriaDialogo != null) {
            //     txtIdConvocatoriaDialogo.setText(String.valueOf(convocatoriaSeleccionada.getIdConvocatoria()));
            // }

            txtFieldTituloConvocatoria.setText(convocatoriaSeleccionada.getTitulo());
            taDescripcionConvocatoria.setText(convocatoriaSeleccionada.getDescripcion());

            if (dateChooserFechaInscripcion != null) { // Nombre de tu JDateChooser
                dateChooserFechaInscripcion.setDate(convocatoriaSeleccionada.getFechaPublicacion());
            }
            if (dateChooserFechaLimite != null) { // Nombre de tu JDateChooser
                dateChooserFechaLimite.setDate(convocatoriaSeleccionada.getFechaLimitePropuestas());
            }

            // El campo documentoAdjuntoRuta no está en tu UI, así que no se carga.
            // Los campos idUsuarioPublica, fechaCreacion, ultimaModificacion son de sistema.
        }
    }//GEN-LAST:event_tblConvocatoriasMouseClicked

    private void btnPublicarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPublicarActionPerformed
        String titulo = txtFieldTituloConvocatoria.getText().trim();
        String descripcion = taDescripcionConvocatoria.getText().trim();
        java.util.Date fechaPublicacion = null;
        if (dateChooserFechaInscripcion != null) {
            fechaPublicacion = dateChooserFechaInscripcion.getDate();
        }
        java.util.Date fechaLimite = null;
        if (dateChooserFechaLimite != null) {
            fechaLimite = dateChooserFechaLimite.getDate();
        }

        if (titulo.isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "El título de la convocatoria es obligatorio.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            txtFieldTituloConvocatoria.requestFocus();
            return;
        }
        if (fechaPublicacion == null) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "La fecha de publicación/inscripción es obligatoria.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            return;
        }
        // Puedes añadir más validaciones (ej. fecha límite > fecha publicación)

        Convocatorias nuevaConvocatoria = new Convocatorias();
        nuevaConvocatoria.setTitulo(titulo);
        nuevaConvocatoria.setDescripcion(descripcion);
        nuevaConvocatoria.setFechaPublicacion(fechaPublicacion);
        nuevaConvocatoria.setFechaLimitePropuestas(fechaLimite); // Puede ser null si es opcional

        if (usuarioActual == null) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Error: No se ha identificado al usuario actual para publicar la convocatoria.", "Error de Usuario", JOptionPane.ERROR_MESSAGE);
            return;
        }
        nuevaConvocatoria.setIdUsuarioPublica(usuarioActual);

        java.util.Date ahora = new java.util.Date();
        nuevaConvocatoria.setFechaCreacion(ahora);
        nuevaConvocatoria.setUltimaModificacion(ahora);
        // El campo documentoAdjuntoRuta no se está manejando desde esta UI.

        try {
            ConvocatoriasJpaController controller = new ConvocatoriasJpaController(Conexion.getEMF());
            controller.create(nuevaConvocatoria);
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Convocatoria '" + nuevaConvocatoria.getTitulo() + "' publicada exitosamente.", "Éxito", JOptionPane.INFORMATION_MESSAGE);

            cargarConvocatoriasEnTabla();
            limpiarCamposFormularioConvocatoria();
        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Error al publicar la convocatoria: " + e.getMessage(), "Error de Persistencia", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }//GEN-LAST:event_btnPublicarActionPerformed

    private void btnModificarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnModificarActionPerformed
        // --- Obtener el ID de la convocatoria seleccionada ---
        int filaSeleccionada = tblConvocatorias.getSelectedRow();
        String idConvocatoriaStr;

        if (filaSeleccionada != -1) {
            Object idObjeto = tblConvocatorias.getValueAt(filaSeleccionada, 0); // Asumiendo ID en columna 0
            if (idObjeto == null) {
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "No se pudo obtener el ID de la convocatoria seleccionada de la tabla.", "Error de ID", JOptionPane.WARNING_MESSAGE);
                return;
            }
            idConvocatoriaStr = idObjeto.toString();
        } else {
            // Alternativa: si tienes un txtIdConvocatoriaDialogo no editable
            // if (txtIdConvocatoriaDialogo != null && !txtIdConvocatoriaDialogo.getText().isEmpty()) {
            //     idConvocatoriaStr = txtIdConvocatoriaDialogo.getText();
            // } else {
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Por favor, seleccione una convocatoria de la tabla para modificar.", "Convocatoria no seleccionada", JOptionPane.WARNING_MESSAGE);
                return;
            // }
        }
        // --- Fin de la obtención del ID ---

        int idConvocatoria;
        try {
            idConvocatoria = Integer.parseInt(idConvocatoriaStr);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "El ID de la convocatoria no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        String titulo = txtFieldTituloConvocatoria.getText().trim();
        String descripcion = taDescripcionConvocatoria.getText().trim();
        java.util.Date fechaPublicacion = (dateChooserFechaInscripcion != null) ? dateChooserFechaInscripcion.getDate() : null;
        java.util.Date fechaLimite = (dateChooserFechaLimite != null) ? dateChooserFechaLimite.getDate() : null;

        if (titulo.isEmpty()) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "El título de la convocatoria es obligatorio.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            txtFieldTituloConvocatoria.requestFocus();
            return;
        }
        if (fechaPublicacion == null) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "La fecha de publicación/inscripción es obligatoria.", "Campo Vacío", JOptionPane.WARNING_MESSAGE);
            return;
        }

        ConvocatoriasJpaController controller = new ConvocatoriasJpaController(Conexion.getEMF());
        Convocatorias convocatoriaExistente = controller.findConvocatorias(idConvocatoria);

        if (convocatoriaExistente == null) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "No se encontró la convocatoria con ID: " + idConvocatoria, "Convocatoria No Encontrada", JOptionPane.ERROR_MESSAGE);
            return;
        }

        convocatoriaExistente.setTitulo(titulo);
        convocatoriaExistente.setDescripcion(descripcion);
        convocatoriaExistente.setFechaPublicacion(fechaPublicacion);
        convocatoriaExistente.setFechaLimitePropuestas(fechaLimite);
        convocatoriaExistente.setUltimaModificacion(new java.util.Date());
        // idUsuarioPublica no se debería cambiar en una modificación, usualmente.
        // documentoAdjuntoRuta no se maneja aquí.

        try {
            controller.edit(convocatoriaExistente);
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Convocatoria '" + convocatoriaExistente.getTitulo() + "' actualizada exitosamente.", "Éxito", JOptionPane.INFORMATION_MESSAGE);

            cargarConvocatoriasEnTabla();
            limpiarCamposFormularioConvocatoria();
        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Error al actualizar la convocatoria: " + e.getMessage(), "Error de Persistencia", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }//GEN-LAST:event_btnModificarActionPerformed

    private void btnEliminarConvocatoriaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarConvocatoriaActionPerformed
        // --- Obtener el ID de la convocatoria seleccionada ---
        int filaSeleccionada = tblConvocatorias.getSelectedRow();
        String idConvocatoriaStr;

        if (filaSeleccionada != -1) {
            Object idObjeto = tblConvocatorias.getValueAt(filaSeleccionada, 0); // Asumiendo ID en columna 0
            if (idObjeto == null) {
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "No se pudo obtener el ID de la convocatoria seleccionada de la tabla.", "Error de ID", JOptionPane.WARNING_MESSAGE);
                return;
            }
            idConvocatoriaStr = idObjeto.toString();
        } else {
            // Alternativa: si tienes un txtIdConvocatoriaDialogo no editable
            // if (txtIdConvocatoriaDialogo != null && !txtIdConvocatoriaDialogo.getText().isEmpty()) {
            //     idConvocatoriaStr = txtIdConvocatoriaDialogo.getText();
            // } else {
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Por favor, seleccione una convocatoria de la tabla para eliminar.", "Convocatoria no seleccionada", JOptionPane.WARNING_MESSAGE);
                return;
            // }
        }
        // --- Fin de la obtención del ID ---

        int idConvocatoria;
        try {
            idConvocatoria = Integer.parseInt(idConvocatoriaStr);
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(DialogGestionConvocatorias, "El ID de la convocatoria no es válido.", "Error de ID", JOptionPane.ERROR_MESSAGE);
            return;
        }

        int confirm = JOptionPane.showConfirmDialog(DialogGestionConvocatorias,
            "¿Está seguro de que desea eliminar la convocatoria con ID: " + idConvocatoria + "?\nLas notificaciones y eventos asociados podrían desvincularse.",
            "Confirmar Eliminación", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);

        if (confirm == JOptionPane.YES_OPTION) {
            ConvocatoriasJpaController controller = new ConvocatoriasJpaController(Conexion.getEMF());
            try {
                // El ConvocatoriasJpaController.destroy() ya maneja la desvinculación de Notificaciones y Eventos
                // poniendo sus claves foráneas a NULL.
                controller.destroy(idConvocatoria); 

                cargarConvocatoriasEnTabla();
                limpiarCamposFormularioConvocatoria();
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Convocatoria eliminada exitosamente.", "Eliminación Exitosa", JOptionPane.INFORMATION_MESSAGE);

            } catch (NonexistentEntityException ex) {
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "La convocatoria que intenta eliminar ya no existe.", "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                ex.printStackTrace();
            } catch (Exception e) { 
                JOptionPane.showMessageDialog(DialogGestionConvocatorias, "Ocurrió un error al intentar eliminar la convocatoria: " + e.getMessage(), "Error de Eliminación", JOptionPane.ERROR_MESSAGE);
                e.printStackTrace();
            }
        }
    }//GEN-LAST:event_btnEliminarConvocatoriaActionPerformed

    private void btnLimpiarConvocatoriasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLimpiarConvocatoriasActionPerformed
        limpiarCamposFormularioConvocatoria();
    }//GEN-LAST:event_btnLimpiarConvocatoriasActionPerformed

    private void btnLimpiarTalleresActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLimpiarTalleresActionPerformed
        limpiarCamposFormularioTaller();
    }//GEN-LAST:event_btnLimpiarTalleresActionPerformed
    
    // -------------------------------------------------------------------------
    // Manipulacion de DialogGestionUsuarios
    private void cargarUsuariosEnTabla() {
        DefaultTableModel modelo = (DefaultTableModel) ttUsuarios.getModel();
        modelo.setRowCount(0); // Limpiar la tabla

        try {
            UsuariosJpaController controller = new UsuariosJpaController(Conexion.getEMF());
            List<Usuarios> listaUsuarios = controller.findUsuariosEntities();

            for (Usuarios u : listaUsuarios) {
                Object[] fila = new Object[]{
                    u.getIdUsuario(),
                    u.getNombre(),
                    u.getCorreo(),
                    u.getRol(),
                    u.getNumeroControl(),
                    u.getContrasenaHash()
                };
                modelo.addRow(fila);
            }
        } catch (Exception e) {
            System.err.println("Error al cargar los usuarios: " + e.getMessage());
        }
    }
    private void seleccionarUsuarios() {    // Muestra en elementos filas de la tabla
        ttUsuarios.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                limpiarCamposUsuario();
                int selectedRow = ttUsuarios.getSelectedRow();
                if (selectedRow != -1) {
                    DefaultTableModel model = (DefaultTableModel) ttUsuarios.getModel();
                    
                    txtUID.setText(String.valueOf((int) model.getValueAt(selectedRow, 0)));
                    txtUNombre.setText(model.getValueAt(selectedRow, 1).toString());
                    txtUEmail.setText(model.getValueAt(selectedRow, 2).toString());
                    cboURol.setSelectedItem(model.getValueAt(selectedRow, 3).toString());
                    txtUNumControl.setText(model.getValueAt(selectedRow, 4).toString());
                    passContrasena.setText(model.getValueAt(selectedRow, 5).toString());
                }
            }
        });
    }
    
    // -------------------------------------------------------------------------
    // Manipulacion de DialogGestionEventos
    private void cargarEventosEnTabla() {
        DefaultTableModel modelo2 = (DefaultTableModel) ttEventos.getModel();
        modelo2.setRowCount(0); // Limpiar la tabla

        try {
            EventosJpaController controller = new EventosJpaController(Conexion.getEMF());
            List<Eventos> listaEventos = controller.findEventosEntities();

            // Formato para la fecha
            SimpleDateFormat formatoFecha = new SimpleDateFormat("yyyy-MM-dd");
            // Formato para la hora
            SimpleDateFormat formatoHora = new SimpleDateFormat("HH:mm");

            for (Eventos e : listaEventos) {
                // Formatear la fecha y las horas
                String fechaFormateada = formatoFecha.format(e.getFechaEvento());
                String horaInicioFormateada = formatoHora.format(e.getHoraInicioEvento());
                String horaFinFormateada = formatoHora.format(e.getHoraFinEvento());

                // Crear la fila con los datos formateados
                Object[] fila = new Object[]{
                    e.getIdEvento(),
                    e.getNombre(),
                    e.getDescripcionPublica(),
                    fechaFormateada, // Fecha formateada
                    horaInicioFormateada, // Hora de inicio formateada
                    horaFinFormateada, // Hora de fin formateada
                    e.getLugarEvento(),
                    e.getEstadoEvento()
                };

                // Añadir la fila al modelo de la tabla
                modelo2.addRow(fila);
            }
        } catch (Exception e) {
            System.err.println("Error al cargar los eventos: " + e.getMessage());
        }
    }
    private void seleccionarEventos() {    // Muestra en elementos filas de la tabla
        ttEventos.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                limpiarCamposEventos();
                int selectedRow = ttEventos.getSelectedRow();
                if (selectedRow != -1) {
                    DefaultTableModel model = (DefaultTableModel) ttEventos.getModel();
                    
                    txtEID.setText(String.valueOf(model.getValueAt(selectedRow, 0)));
                    txtENombre.setText(model.getValueAt(selectedRow, 1).toString());
                    txtEDescripcion.setText(model.getValueAt(selectedRow, 2).toString());
                    // **Fecha**: Convertir la fecha en el formato 'yyyy-MM-dd'
                    String fechaStr = model.getValueAt(selectedRow, 3).toString(); // Columna 3 = fecha
                    // **Fecha en JCalendar**: Convertir la fecha al tipo java.util.Date
                    try {
                        SimpleDateFormat formatoFecha = new SimpleDateFormat("yyyy-MM-dd");
                        java.util.Date fecha = formatoFecha.parse(fechaStr); // Convertir fecha en String a Date
                        calendario.setDate(fecha); // Establecer fecha en el JCalendar
                    } catch (Exception ex) {
                        System.err.println("Error al convertir la fecha: " + ex.getMessage());
                    }
                    
                    // **Hora Inicio**: Convertir hora en formato 'HH:mm:ss'
                    String horaInicioStr = model.getValueAt(selectedRow, 4).toString(); // Columna 4 = hora inicio
                    if (horaInicioStr != null && !horaInicioStr.isEmpty()) {
                        txtEInicio.setText(horaInicioStr); // Mostrar en el campo txtEInicio
                    }
                    // **Hora Fin**: Convertir hora en formato 'HH:mm:ss'
                    String horaFinStr = model.getValueAt(selectedRow, 5).toString(); // Columna 5 = hora fin
                    if (horaFinStr != null && !horaFinStr.isEmpty()) {
                        txtEFin.setText(horaFinStr); // Mostrar en el campo txtEFin
                    }
                    txtLugar.setText(model.getValueAt(selectedRow, 6).toString());
                    cboEstado.setSelectedItem(model.getValueAt(selectedRow, 7).toString());                    
                }
            }
        });
    }
    

    //--------------------------------------------------------------------------
    //Manipulación de DialogGestionTalleres
    private void cargarPonentesEnComboBox() {
        DefaultComboBoxModel<Usuarios> modeloPonentes = new DefaultComboBoxModel<>();
        cboPonente.setModel(modeloPonentes); // Asignar el modelo primero para limpiar

        try {
            UsuariosJpaController controller = new UsuariosJpaController(Conexion.getEMF());
            List<Usuarios> listaUsuarios = controller.findUsuariosEntities();

            modeloPonentes.addElement(null); // Opción para "Ninguno" o "Seleccionar ponente"
                                            // Si usas null, asegúrate de manejarlo.
                                            // Alternativamente, crea un objeto Usuarios placeholder.

            for (Usuarios usuario : listaUsuarios) {
                // Opcional: Filtrar por rol, por ejemplo, si solo quieres "TALLERISTA" o "DOCENTE"
                // if (usuario.getRol().equals("TALLERISTA") || usuario.getRol().equals("DOCENTE")) {
                //     modeloPonentes.addElement(usuario);
                // }
                modeloPonentes.addElement(usuario); // Añade el objeto Usuario directamente
            }
        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Error al cargar los ponentes: " + e.getMessage(), "Error de Carga", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }
    private void cargarEventosAsociadosEnComboBox() {
        DefaultComboBoxModel<Eventos> modeloEventos = new DefaultComboBoxModel<>();

        try {
            EventosJpaController controller = new EventosJpaController(Conexion.getEMF());
            List<Eventos> listaEventos = controller.findEventosEntities();

            modeloEventos.addElement(null); // Opción para "Ninguno" o "Seleccionar evento"

            for (Eventos evento : listaEventos) {
                // Opcional: Podrías filtrar eventos por estado, por ejemplo, solo eventos "PLANIFICADO" o "CONFIRMADO"
                // if (evento.getEstadoEvento().equals("PLANIFICADO") || evento.getEstadoEvento().equals("CONFIRMADO")) {
                //     modeloEventos.addElement(evento);
                // }
                modeloEventos.addElement(evento); // Añade el objeto Evento directamente
            }
        } catch (Exception e) {
            JOptionPane.showMessageDialog(DialogGestionTalleres, "Error al cargar los eventos: " + e.getMessage(), "Error de Carga", JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }
    // Método de ejemplo para limpiar campos (debes crearlo o adaptarlo)
    private void limpiarCamposFormularioTaller() {
        txtFieldNombreTaller.setText("");
        txtDescripcionTaller.setText(""); // Suponiendo que es tu JTextArea
        txtFieldMaterial_Req.setText("");
        txtManualRuta.setText("");
        

        if (cboPonente.getItemCount() > 0) {
            cboPonente.setSelectedIndex(0); // O -1 si el primer elemento no es un placeholder válido
        }
        
        if (cboEstadoTaller2.getItemCount() > 0) { // Suponiendo que cboEstadoTaller2 es el JComboBox de estado
            cboEstadoTaller2.setSelectedIndex(0);
        }
    }

    // Método de ejemplo para cargar la tabla (debes crearlo o adaptarlo)
    private void cargarTalleresEnTabla() {
        DefaultTableModel modelo = (DefaultTableModel) tblTalleres.getModel(); // Asumiendo que tblTalleres es tu JTable
        modelo.setRowCount(0); // Limpiar tabla

        TalleresJpaController controller = new TalleresJpaController(Conexion.getEMF());
        List<Talleres> lista = controller.findTalleresEntities();

        for (Talleres taller : lista) {
            Object[] row = new Object[]{
                taller.getIdTaller(),
                taller.getNombre(),
                taller.getDescripcionPublica(),
                taller.getIdUsuarioProponente() != null ? taller.getIdUsuarioProponente().getNombre() : "N/A", // Nombre del ponente
                taller.getEstado()
                // Añade más columnas según necesites (ej. Fecha, Cupo, etc., si los implementas)
            };
            modelo.addRow(row);
        }
    }

    //Manipilación de DialogGestionEventos
    private void cargarConvocatoriasEnTabla() {
        DefaultTableModel modelo = (DefaultTableModel) tblConvocatorias.getModel();
        modelo.setRowCount(0); // Limpiar tabla existente

        ConvocatoriasJpaController controller = new ConvocatoriasJpaController(Conexion.getEMF());
        this.listaConvocatoriasCargadas = controller.findConvocatoriasEntities();

        SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy"); // Formato para mostrar fechas

        if (this.listaConvocatoriasCargadas != null) {
            for (Convocatorias conv : this.listaConvocatoriasCargadas) {
                Object[] fila = new Object[]{
                    conv.getIdConvocatoria(),
                    conv.getTitulo(),
                    conv.getFechaPublicacion() != null ? sdf.format(conv.getFechaPublicacion()) : "N/A",
                    conv.getFechaLimitePropuestas() != null ? sdf.format(conv.getFechaLimitePropuestas()) : "N/A",
                    conv.getIdUsuarioPublica() != null ? conv.getIdUsuarioPublica().getNombre() : "N/A"
                };
                modelo.addRow(fila);
            }
        }
    }
        private void limpiarCamposFormularioConvocatoria() {
        // if (txtIdConvocatoriaDialogo != null) {
        //     txtIdConvocatoriaDialogo.setText("");
        // }
        txtFieldTituloConvocatoria.setText("");
        taDescripcionConvocatoria.setText("");
        if (dateChooserFechaInscripcion != null) {
            dateChooserFechaInscripcion.setDate(null);
        }
        if (dateChooserFechaLimite != null) {
            dateChooserFechaLimite.setDate(null);
        }
        // Limpia cualquier otro campo que hayas añadido para la convocatoria
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(VentanaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(VentanaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(VentanaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(VentanaPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new VentanaPrincipal(null).setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JDialog DialogGestionConvocatorias;
    private javax.swing.JDialog DialogGestionEventos;
    private javax.swing.JDialog DialogGestionEvidencias;
    private javax.swing.JDialog DialogGestionTalleres;
    private javax.swing.JDialog DialogGestionUsuarios;
    private javax.swing.JDialog DialogInscripcionEventoTaller;
    private javax.swing.JLabel TITULO;
    private javax.swing.JLabel TITULO1;
    private javax.swing.JLabel TITULO2;
    private javax.swing.JLabel TITULO3;
    private javax.swing.JLabel TITULO4;
    private javax.swing.JLabel TITULO5;
    private javax.swing.JLabel TITULO6;
    private javax.swing.JLabel TITULO7;
    private javax.swing.JButton btnActualizar;
    private javax.swing.JButton btnActualizarTaller;
    private javax.swing.JButton btnAgregar;
    private javax.swing.JButton btnAgregarTaller;
    private javax.swing.JButton btnDescargarEvidencia;
    private javax.swing.JToggleButton btnDesinscribirme;
    private javax.swing.JButton btnECrear;
    private javax.swing.JButton btnEEliminar;
    private javax.swing.JButton btnELimpiar;
    private javax.swing.JButton btnEModificar;
    private javax.swing.JButton btnEliminar;
    private javax.swing.JButton btnEliminarConvocatoria;
    private javax.swing.JButton btnEliminarEvidencia;
    private javax.swing.JButton btnElliminarTaller;
    private javax.swing.JButton btnInscribirme;
    private javax.swing.JButton btnLimpiar;
    private javax.swing.JButton btnLimpiarConvocatorias;
    private javax.swing.JButton btnLimpiarTalleres;
    private javax.swing.JButton btnModificar;
    private javax.swing.JButton btnPublicar;
    private javax.swing.JButton btnSeleccionarArchivo;
    private javax.swing.JButton btnSubirEvidencia;
    private com.toedter.calendar.JCalendar calendario;
    private javax.swing.JComboBox<String> cboEstado;
    private javax.swing.JLabel cboEstadoTaller;
    private javax.swing.JComboBox<String> cboEstadoTaller2;
    private javax.swing.JComboBox<modelo.Usuarios> cboPonente;
    private javax.swing.JComboBox<String> cboURol;
    private com.toedter.calendar.JDateChooser dateChooserFechaInscripcion;
    private com.toedter.calendar.JDateChooser dateChooserFechaLimite;
    private javax.swing.JLabel encabezado;
    private javax.swing.JLabel encabezado1;
    private javax.swing.JLabel encabezado2;
    private javax.swing.JLabel encabezado4;
    private javax.swing.JFileChooser jFileChooser1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane10;
    private javax.swing.JScrollPane jScrollPane11;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JScrollPane jScrollPane7;
    private javax.swing.JScrollPane jScrollPane8;
    private javax.swing.JScrollPane jScrollPane9;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JSeparator jSeparator5;
    private javax.swing.JSeparator jSeparator6;
    private javax.swing.JTable jTable1;
    private javax.swing.JLabel lblBienvenida;
    private javax.swing.JLabel lblCorreo;
    private javax.swing.JLabel lblNombre;
    private javax.swing.JLabel lblNumControl;
    private javax.swing.JLabel lblRol;
    private javax.swing.JMenu menuArchivo;
    private javax.swing.JMenu menuAyuda;
    private javax.swing.JMenuBar menuBarraPrincipal;
    private javax.swing.JMenu menuGestion;
    private javax.swing.JMenu menuInscripcion;
    private javax.swing.JMenu menuReportes;
    private javax.swing.JMenu menuSalir;
    private javax.swing.JMenuItem opcionAyuda;
    private javax.swing.JMenuItem opcionCerrarSesion;
    private javax.swing.JMenuItem opcionConvocatorias;
    private javax.swing.JMenuItem opcionEventos;
    private javax.swing.JMenuItem opcionEvidencias;
    private javax.swing.JMenuItem opcionInscripcion;
    private javax.swing.JMenuItem opcionSalir;
    private javax.swing.JMenuItem opcionTalleres;
    private javax.swing.JMenuItem opcionUsuarios;
    private javax.swing.JPanel panelEncabezado;
    private javax.swing.JPanel panelEstatus;
    private javax.swing.JPanel panelGeneral;
    private javax.swing.JPasswordField passContrasena;
    private javax.swing.JTextArea taDescripcionConvocatoria;
    private javax.swing.JTextArea taDescripcionEvidencia;
    private javax.swing.JTable tblConvocatorias;
    private javax.swing.JTable tblEvidencias;
    private javax.swing.JTable tblTalleres;
    private javax.swing.JTable tblTalleresDisponibles;
    private javax.swing.JTable ttEventos;
    private javax.swing.JTable ttUsuarios;
    private javax.swing.JTextArea txtDescripcionTaller;
    private javax.swing.JTextArea txtEDescripcion;
    private javax.swing.JTextField txtEFin;
    private javax.swing.JTextField txtEID;
    private javax.swing.JTextField txtEInicio;
    private javax.swing.JTextField txtENombre;
    private javax.swing.JLabel txtFecha_Hora;
    private javax.swing.JTextField txtFieldMaterial_Req;
    private javax.swing.JTextField txtFieldNombreTaller;
    private javax.swing.JTextField txtFieldTituloConvocatoria;
    private javax.swing.JTextField txtFieldTituloEvidencia;
    private javax.swing.JTextField txtLugar;
    private javax.swing.JTextField txtManualRuta;
    private javax.swing.JLabel txtMaterialReq;
    private javax.swing.JLabel txtNombreTaller;
    private javax.swing.JLabel txtNombreTaller1;
    private javax.swing.JLabel txtNombreTaller2;
    private javax.swing.JLabel txtNombreTaller4;
    private javax.swing.JLabel txtNombreTaller5;
    private javax.swing.JLabel txtNombreTaller6;
    private javax.swing.JTextField txtUEmail;
    private javax.swing.JTextField txtUID;
    private javax.swing.JTextField txtUNombre;
    private javax.swing.JTextField txtUNumControl;
    // End of variables declaration//GEN-END:variables
}
